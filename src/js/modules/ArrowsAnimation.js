import { Module } from './Module'
import gsap from 'gsap'

const ARROWS_SVG_TEMPLATE = `
<svg xmlns="http://www.w3.org/2000/svg" width="82" height="29" viewBox="0 0 82 29" fill="none">
<path d="M0.5 28.4658V21.4548C0.500086 21.2338 0.571293 21.0185 0.703322 20.8401C0.835352 20.6617 1.02136 20.5294 1.23445 20.4624L16.4645 15.7025C16.5623 15.6719 16.6477 15.6112 16.7083 15.5293C16.7688 15.4474 16.8014 15.3486 16.8013 15.2471V13.7779C16.801 13.6768 16.7682 13.5784 16.7076 13.497C16.6471 13.4155 16.5619 13.3552 16.4645 13.3247L1.23445 8.5368C1.02136 8.46981 0.835352 8.33755 0.703322 8.15915C0.571293 7.98076 0.500086 7.76547 0.5 7.54443V0.535543C0.499887 0.449339 0.520854 0.364389 0.561114 0.287922C0.601375 0.211456 0.659736 0.14574 0.731226 0.0963768C0.802717 0.0470132 0.885217 0.0154622 0.971702 0.00441222C1.05819 -0.00663776 1.14609 0.00314168 1.22793 0.0329148L20.9885 7.20505C22.8056 7.86479 24.3129 9.16353 25.2221 10.8529C26.1313 12.5422 26.3786 14.5036 25.9167 16.3619C25.5815 17.628 24.9364 18.7931 24.0384 19.7547C23.1403 20.7162 22.0168 21.4446 20.7668 21.8758L1.22793 28.9642C1.14644 28.9938 1.05892 29.0037 0.972776 28.9928C0.886632 28.982 0.804391 28.9508 0.733001 28.9019C0.661611 28.8531 0.60317 28.7879 0.562616 28.712C0.522061 28.6361 0.500585 28.5517 0.5 28.4658Z" fill="#E6360C"/>
<path d="M28.8725 28.9661L48.4135 21.8778C49.6632 21.4465 50.7864 20.7179 51.6841 19.7564C52.5817 18.7948 53.2264 17.6298 53.5612 16.3639C54.0232 14.5059 53.7762 12.5447 52.8674 10.8554C51.9587 9.16606 50.4519 7.86714 48.6352 7.207L28.8725 0.0348645C28.7906 0.00509143 28.7027 -0.00468391 28.6162 0.00636607C28.5297 0.017416 28.4472 0.048963 28.3758 0.0983265C28.3043 0.14769 28.2459 0.213405 28.2056 0.289872C28.1654 0.366338 28.1444 0.451293 28.1445 0.537496V7.54638C28.1446 7.76742 28.2158 7.98271 28.3479 8.1611C28.4799 8.3395 28.6659 8.47176 28.879 8.53875L44.1112 13.3266C44.2084 13.3572 44.2933 13.4176 44.3535 13.4991C44.4136 13.5806 44.446 13.679 44.4458 13.7798V15.2491C44.4459 15.3505 44.4134 15.4494 44.3528 15.5313C44.2922 15.6132 44.2068 15.6738 44.109 15.7044L28.8898 20.4622C28.6768 20.5292 28.4907 20.6615 28.3587 20.8399C28.2267 21.0183 28.1555 21.2336 28.1554 21.4546V28.4656C28.1562 28.5504 28.1774 28.6337 28.2172 28.7087C28.2571 28.7838 28.3143 28.8484 28.3844 28.8973C28.4544 28.9462 28.5352 28.9779 28.62 28.9899C28.7049 29.0018 28.7914 28.9937 28.8725 28.9661Z" fill="#E6360C"/>
<path d="M56.517 28.9663L76.0581 21.878C77.308 21.4468 78.4316 20.7183 79.3296 19.7568C80.2277 18.7953 80.8727 17.6301 81.2079 16.3641C81.6698 14.5058 81.4225 12.5444 80.5133 10.855C79.6041 9.16568 78.0968 7.86693 76.2797 7.2072L56.517 0.0329148C56.4352 0.00314168 56.3473 -0.00663776 56.2608 0.00441222C56.1743 0.0154622 56.0918 0.0470132 56.0203 0.0963768C55.9488 0.14574 55.8904 0.211456 55.8502 0.287922C55.8099 0.364389 55.7889 0.449339 55.7891 0.535543V7.54443C55.7891 7.76547 55.8604 7.98076 55.9924 8.15915C56.1244 8.33755 56.3104 8.46981 56.5235 8.5368L71.7557 13.3247C71.853 13.3553 71.9378 13.4157 71.998 13.4972C72.0582 13.5787 72.0905 13.677 72.0903 13.7779V15.2471C72.0908 15.3487 72.0584 15.4477 71.9978 15.5296C71.9371 15.6116 71.8515 15.6722 71.7535 15.7025L56.5235 20.4624C56.3104 20.5294 56.1244 20.6617 55.9924 20.8401C55.8604 21.0185 55.7891 21.2338 55.7891 21.4548V28.4658C55.7893 28.5519 55.8105 28.6366 55.8509 28.7127C55.8913 28.7889 55.9497 28.8544 56.0212 28.9035C56.0926 28.9526 56.175 28.984 56.2613 28.9949C56.3476 29.0058 56.4353 28.996 56.517 28.9663Z" fill="#E6360C"/>
</svg>
`

class ArrowsAnimation extends Module {
  constructor(element, ctx) {
    super(element, ctx)
  }

  init() {
    const svg = this.$element.querySelector('._icon-logo-arrows')

    if (!svg) return

    const div = document.createElement('div')
    div.innerHTML = ARROWS_SVG_TEMPLATE

    svg.replaceWith(div.firstElementChild)

    const newSvg = this.$element.querySelector('svg')
    const paths = newSvg.querySelectorAll('path')

    this.tl = gsap.timeline({
      scrollTrigger: {
        trigger: this.$element,
        start: 'top bottom-=30%',
      },
    })

    this.tl.fromTo(
      paths,
      {
        opacity: 0,
        x: '-5%',
      },
      {
        opacity: 1,
        x: '0%',
        stagger: 0.15,
      },
    )
  }
  destroy() {
    this.tl.kill()
  }
}

export default ArrowsAnimation
